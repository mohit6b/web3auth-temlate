"use strict";(self.webpackChunkweb3auth_poc=self.webpackChunkweb3auth_poc||[]).push([[108],{92108:function(e,t,n){n.d(t,{d:function(){return z}});var r=n(15861),a=n(15671),o=n(43144),c=n(97326),i=n(60136),s=n(82963),l=n(61120),u=n(4942),p=n(87757),h=n.n(p),d=n(64613),f=n(688),m=n(58489),v=n(30456),y=n(62895),g=n.n(y),k="eip155",E="solana",N="other",w=function(e,t){if(e===N)return null;var n=t?"number"===typeof t?t:parseInt(t,16):function(e){if(e===k)return 1;if(e===E)return 1;throw new Error("Chain namespace ".concat(e," is not supported"))}(e);return e===k?function(e){return 1===e?{chainNamespace:k,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/eth",displayName:"Ethereum Mainnet",blockExplorer:"https://etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:3===e?{chainNamespace:k,chainId:"0x3",rpcTarget:"https://rpc.ankr.com/eth_ropsten",displayName:"Ropsten Testnet",blockExplorer:"https://ropsten.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:4===e?{chainNamespace:k,chainId:"0x4",rpcTarget:"https://rpc.ankr.com/eth_rinkeby",displayName:"Rinkeby Testnet",blockExplorer:"https://rinkeby.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:5===e?{chainNamespace:k,chainId:"0x5",rpcTarget:"https://rpc.ankr.com/eth_goerli",displayName:"Goerli Testnet",blockExplorer:"https://goerli.etherscan.io/",ticker:"ETH",tickerName:"Ethereum"}:137===e?{chainNamespace:k,chainId:"0x89",rpcTarget:"https://rpc.ankr.com/polygon",displayName:"Polygon Mainnet",blockExplorer:"https://polygonscan.com",ticker:"MATIC",tickerName:"Polygon"}:80001===e?{chainNamespace:k,chainId:"0x13881",rpcTarget:"https://rpc.ankr.com/polygon_mumbai",displayName:"Polygon Mumbai Testnet",blockExplorer:"https://mumbai.polygonscan.com/",ticker:"MATIC",tickerName:"Polygon"}:56===e?{chainNamespace:k,chainId:"0x38",rpcTarget:"https://rpc.ankr.com/bsc",displayName:"Binance SmartChain Mainnet",blockExplorer:"https://bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain"}:97===e?{chainNamespace:k,chainId:"0x61",rpcTarget:"https://rpc.ankr.com/bsc_testnet_chapel",displayName:"Binance SmartChain Testnet",blockExplorer:"https://testnet.bscscan.com",ticker:"BNB",tickerName:"Binance SmartChain"}:25===e?{chainNamespace:k,chainId:"0x19",rpcTarget:"https://rpc.cronos.org",displayName:"Cronos Mainnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:338===e?{chainNamespace:k,chainId:"0x152",rpcTarget:"https://rpc-t3.cronos.org/",displayName:"Cronos Testnet",blockExplorer:"https://cronoscan.com/",ticker:"CRO",tickerName:"Cronos"}:8217===e?{chainNamespace:k,chainId:"0x2019",rpcTarget:"https://public-node-api.klaytnapi.com/v1/cypress",displayName:"Klaytn Mainnet",blockExplorer:"https://scope.klaytn.com",ticker:"KLAY",tickerName:"Klaytn"}:null}(n):e===E?function(e){return 1===e?{chainNamespace:E,chainId:"0x1",rpcTarget:"https://rpc.ankr.com/solana",displayName:"Solana Mainnet",blockExplorer:"https://explorer.solana.com",ticker:"SOL",tickerName:"Solana"}:2===e?{chainNamespace:E,chainId:"0x2",rpcTarget:"https://api.testnet.solana.com",displayName:"Solana Testnet",blockExplorer:"https://explorer.solana.com?cluster=testnet",ticker:"SOL",tickerName:"Solana"}:3===e?{chainNamespace:E,chainId:"0x3",rpcTarget:"https://api.devnet.solana.com",displayName:"Solana Devnet",blockExplorer:"https://explorer.solana.com?cluster=devnet",ticker:"SOL",tickerName:"Solana"}:null}(n):null};function b(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var C=function(e){(0,i.Z)(n,e);var t=b(n);function n(e,r){var o;return(0,a.Z)(this,n),o=t.call(this,r),(0,u.Z)((0,c.Z)(o),"code",void 0),(0,u.Z)((0,c.Z)(o),"message",void 0),o.code=e,o.message=r||"",Object.defineProperty((0,c.Z)(o),"name",{value:"Web3AuthError"}),o}return(0,o.Z)(n,[{key:"toJSON",value:function(){return{name:this.name,code:this.code,message:this.message}}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}]),n}(f.s),O=function(e){(0,i.Z)(n,e);var t=b(n);function n(e,r){var o;return(0,a.Z)(this,n),o=t.call(this,e,r),Object.defineProperty((0,c.Z)(o),"name",{value:"WalletInitializationError"}),o}return(0,o.Z)(n,null,[{key:"fromCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new n(e,"".concat(n.messages[e],", ").concat(t))}},{key:"notFound",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5001,e)}},{key:"notInstalled",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5002,e)}},{key:"notReady",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5003,e)}},{key:"windowBlocked",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5004,e)}},{key:"windowClosed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5005,e)}},{key:"incompatibleChainNameSpace",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5006,e)}},{key:"duplicateAdapterError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5007,e)}},{key:"invalidProviderConfigError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5008,e)}},{key:"providerNotReadyError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5009,e)}},{key:"rpcConnectionError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5010,e)}},{key:"invalidParams",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5011,e)}},{key:"invalidNetwork",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5013,e)}}]),n}(C);(0,u.Z)(O,"messages",{5e3:"Custom",5001:"Wallet is not found",5002:"Wallet is not installed",5003:"Wallet is not ready yet",5004:"Wallet window is blocked",5005:"Wallet window has been closed by the user",5006:"Incompatible chain namespace provided",5007:"Adapter has already been included",5008:"Invalid provider Config",5009:"Provider is not ready yet",5010:"Failed to connect with rpc url",5011:"Invalid params passed in",5013:"Invalid network provided"});var T=function(e){(0,i.Z)(n,e);var t=b(n);function n(e,r){var o;return(0,a.Z)(this,n),o=t.call(this,e,r),Object.defineProperty((0,c.Z)(o),"name",{value:"WalletLoginError"}),o}return(0,o.Z)(n,null,[{key:"fromCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return new n(e,"".concat(n.messages[e]).concat(t))}},{key:"connectionError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5111,e)}},{key:"disconnectionError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5112,e)}},{key:"notConnectedError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5113,e)}},{key:"popupClosed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return n.fromCode(5114,e)}}]),n}(C);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(0,u.Z)(T,"messages",{5e3:"Custom",5111:"Failed to connect with wallet",5112:"Failed to disconnect from wallet",5113:"Wallet is not connected",5114:"Wallet popup has been closed by the user"});var Z={OPENLOGIN:"openlogin",WALLET_CONNECT_V1:"wallet-connect-v1",WALLET_CONNECT_V2:"wallet-connect-v2"},R=I({TORUS_SOLANA:"torus-solana",PHANTOM:"phantom",SOLLET:"sollet",SOLLET_EXTENSION:"sollet-extension",SOLFLARE:"solflare",SLOPE:"slope"},Z),S=I({TORUS_EVM:"torus-evm",METAMASK:"metamask",COINBASE:"coinbase"},Z),_=I(I({},S),R);function A(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,u.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j={NOT_READY:"not_ready",READY:"ready",CONNECTING:"connecting",CONNECTED:"connected",DISCONNECTED:"disconnected",ERRORED:"errored"},L=D(D({},j),{},{ADAPTER_DATA_UPDATED:"adapter_data_updated"}),B=function(e){(0,i.Z)(n,e);var t=A(n);function n(){var e;(0,a.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,u.Z)((0,c.Z)(e),"adapterData",{}),(0,u.Z)((0,c.Z)(e),"sessionTime",86400),(0,u.Z)((0,c.Z)(e),"chainConfig",null),e}return(0,o.Z)(n,[{key:"chainConfigProxy",get:function(){return this.chainConfig?D({},this.chainConfig):null}},{key:"setChainConfig",value:function(e){if(this.status!==j.READY){if(!e.chainNamespace)throw O.notReady("ChainNamespace is required while setting chainConfig");var t=w(e.chainNamespace,e.chainId);this.chainConfig=D(D({},t),e)}}},{key:"setAdapterSettings",value:function(e){}},{key:"checkConnectionRequirements",value:function(){if(this.name!==_.WALLET_CONNECT_V1||this.status!==j.CONNECTING){if(this.status===j.CONNECTING)throw O.notReady("Already connecting");if(this.status===j.CONNECTED)throw T.connectionError("Already connected");if(this.status!==j.READY)throw T.connectionError("Wallet adapter is not ready yet, Please wait for init function to resolve before calling connect/connectTo function");if(!this.clientId)throw T.connectionError("Please initialize Web3Auth with a valid clientId in constructor")}}},{key:"checkInitializationRequirements",value:function(){if(this.status!==j.NOT_READY){if(this.status===j.CONNECTED)throw O.notReady("Already connected");if(this.status===j.READY)throw O.notReady("Adapter is already initialized")}}},{key:"updateAdapterData",value:function(e){this.adapterData=e,this.emit(L.ADAPTER_DATA_UPDATED,{adapterName:this.name,data:e})}}]),n}(d.Ue),M="https://authjs.web3auth.io",W=g().getLogger("web3auth-logger");function F(e){var t,n=!1,r=0;try{t=window[e],n=!0,r=t.length;var a="__storage_test__";return t.setItem(a,a),t.removeItem(a),!0}catch(c){var o=c;return!(!o||22!==o.code&&1014!==o.code&&"QuotaExceededError"!==o.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==o.name||!n||0===r)}}var U=function(e){var t=(0,v.Z)(e);return!t.exp||t.exp<Math.floor(Date.now()/1e3)},Y=function(){var e=(0,r.Z)(h().mark((function e(t,n){var r,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={payload:t,header:{t:"solana"===n?"sip99":"eip191"},network:"solana"===n?"solana":"ethereum"},e.next=6,(0,m.v_)("".concat(M,"/siww/get"),r);case 6:if((a=e.sent).success){e.next=9;break}throw new Error("Failed to authenticate user, Please reach out to Web3Auth Support team");case 9:return e.abrupt("return",a.challenge);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=(0,r.Z)(h().mark((function e(t,n,r,a,o,c){var i,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={signature:{s:n,t:"solana"===t?"sip99":"eip191"},message:r,issuer:a,audience:window.location.hostname,timeout:o},e.next=4,(0,m.v_)("".concat(M,"/siww/verify"),i,{headers:{client_id:c,wallet_provider:a}});case 4:if((s=e.sent).success){e.next=8;break}throw W.error("Failed to authenticate user, ,message verification failed",s.error),new Error("Failed to authenticate user, ,message verification failed");case 8:return e.abrupt("return",s.token);case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,a,o,c){return e.apply(this,arguments)}}(),H=function(e,t,n){return F("localStorage")?localStorage.setItem("".concat(e.toLowerCase(),"_").concat(t),n):null};function G(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,l.Z)(e);if(t){var a=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,s.Z)(this,n)}}var z=function(e){(0,i.Z)(n,e);var t=G(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.Z)(this,n),e=t.call(this),(0,u.Z)((0,c.Z)(e),"clientId",void 0),e.clientId=r.clientId,e}return(0,o.Z)(n,[{key:"authenticateUser",value:function(){var e=(0,r.Z)(h().mark((function e(){var t,n,r,a,o,c,i,s,l,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.provider&&null!==(t=this.chainConfig)&&void 0!==t&&t.chainId){e.next=2;break}throw T.notConnectedError();case 2:if(n=this.chainConfig,r=n.chainNamespace,a=n.chainId,this.status===j.CONNECTED){e.next=5;break}throw T.notConnectedError("Not connected with wallet, Please login/connect first");case 5:return e.next=7,this.provider.request({method:"eth_accounts"});case 7:if(!((o=e.sent)&&o.length>0)){e.next=26;break}if(p=o[0],h=this.name,!(c=F("localStorage")?localStorage.getItem("".concat(p.toLowerCase(),"_").concat(h)):null)){e.next=14;break}if(U(c)){e.next=14;break}return e.abrupt("return",{idToken:c});case 14:return i={domain:window.location.origin,uri:window.location.href,address:o[0],chainId:parseInt(a,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:(new Date).toISOString()},e.next=17,Y(i,r);case 17:return s=e.sent,e.next=20,this.provider.request({method:"personal_sign",params:[s,o[0]]});case 20:return l=e.sent,e.next=23,q(r,l,s,this.name,this.sessionTime,this.clientId);case 23:return u=e.sent,H(o[0],this.name,u),e.abrupt("return",{idToken:u});case 26:throw T.notConnectedError("Not connected with wallet, Please login/connect first");case 27:case"end":return e.stop()}var p,h}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,r.Z)(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.status===j.CONNECTED){e.next=2;break}throw T.disconnectionError("Not connected with wallet");case 2:return e.next=4,this.provider.request({method:"eth_accounts"});case 4:(t=e.sent)&&t.length>0&&(n=t[0],r=this.name,F("localStorage")&&localStorage.removeItem("".concat(n.toLowerCase(),"_").concat(r)));case 6:case"end":return e.stop()}var n,r}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(B)}}]);
//# sourceMappingURL=108.235b8847.chunk.js.map